<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/Bufferization/Transforms/OneShotAnalysis.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">16.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_556cbcf41dc9f6a4cebed138b2acfeaf.html">Bufferization</a></li><li class="navelem"><a class="el" href="dir_6a00c96d3d316031f3639df96a4a4a79.html">Transforms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">OneShotAnalysis.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="OneShotAnalysis_8h_source.html">mlir/Dialect/Bufferization/Transforms/OneShotAnalysis.h</a>&quot;</code><br />
<code>#include &lt;random&gt;</code><br />
<code>#include &quot;<a class="el" href="BufferizableOpInterface_8h_source.html">mlir/Dialect/Bufferization/IR/BufferizableOpInterface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Bufferization_8h_source.html">mlir/Dialect/Bufferization/IR/Bufferization.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Bufferize_8h_source.html">mlir/Dialect/Bufferization/Transforms/Bufferize.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mlir_2Dialect_2Bufferization_2Transforms_2Transforms_8h_source.html">mlir/Dialect/Bufferization/Transforms/Transforms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="FuncOps_8h_source.html">mlir/Dialect/Func/IR/FuncOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MemRef_8h_source.html">mlir/Dialect/MemRef/IR/MemRef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AsmState_8h_source.html">mlir/IR/AsmState.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dominance_8h_source.html">mlir/IR/Dominance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2Operation_8h_source.html">mlir/IR/Operation.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="TypeUtilities_8h_source.html">mlir/IR/TypeUtilities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ControlFlowInterfaces_8h_source.html">mlir/Interfaces/ControlFlowInterfaces.h</a>&quot;</code><br />
<code>#include &quot;llvm/ADT/DenseSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SetVector.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for OneShotAnalysis.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="OneShotAnalysis_8cpp__incl.png" border="0" usemap="#alib_2Dialect_2Bufferization_2Transforms_2OneShotAnalysis_8cpp" alt=""/></div>
<map name="alib_2Dialect_2Bufferization_2Transforms_2OneShotAnalysis_8cpp" id="alib_2Dialect_2Bufferization_2Transforms_2OneShotAnalysis_8cpp">
<area shape="rect" title=" " alt="" coords="2977,5,3215,47"/>
<area shape="rect" href="OneShotAnalysis_8h.html" title=" " alt="" coords="369,184,593,225"/>
<area shape="rect" href="BufferizableOpInterface_8h.html" title=" " alt="" coords="294,273,503,315"/>
<area shape="rect" href="IR_2Operation_8h.html" title=" " alt="" coords="4445,370,4590,397"/>
<area shape="rect" title=" " alt="" coords="119,452,278,479"/>
<area shape="rect" title=" " alt="" coords="2853,102,2925,129"/>
<area shape="rect" href="Bufferization_8h.html" title=" " alt="" coords="915,184,1101,225"/>
<area shape="rect" href="Bufferize_8h.html" title=" " alt="" coords="4439,95,4625,136"/>
<area shape="rect" href="mlir_2Dialect_2Bufferization_2Transforms_2Transforms_8h.html" title=" " alt="" coords="3133,95,3320,136"/>
<area shape="rect" href="FuncOps_8h.html" title=" " alt="" coords="2087,184,2236,225"/>
<area shape="rect" href="ControlFlowInterfaces_8h.html" title=" " alt="" coords="2714,273,2913,315"/>
<area shape="rect" href="MemRef_8h.html" title=" " alt="" coords="3051,184,3208,225"/>
<area shape="rect" href="AsmState_8h.html" title=" " alt="" coords="4823,281,4967,307"/>
<area shape="rect" href="Dominance_8h.html" title=" " alt="" coords="4904,102,5059,129"/>
<area shape="rect" href="TypeUtilities_8h.html" title=" " alt="" coords="4717,102,4880,129"/>
<area shape="rect" title=" " alt="" coords="5351,102,5511,129"/>
<area shape="rect" title=" " alt="" coords="43,281,269,307"/>
<area shape="rect" href="PatternMatch_8h.html" title=" " alt="" coords="942,370,1109,397"/>
<area shape="rect" href="mlir_2Support_2LLVM_8h.html" title=" " alt="" coords="2587,370,2739,397"/>
<area shape="rect" title=" " alt="" coords="236,363,441,404"/>
<area shape="rect" title=" " alt="" coords="465,363,697,404"/>
<area shape="rect" href="Block_8h.html" title=" " alt="" coords="4644,452,4761,479"/>
<area shape="rect" href="OperationSupport_8h.html" title=" " alt="" coords="4425,452,4620,479"/>
<area shape="rect" title=" " alt="" coords="4685,527,4763,553"/>
<area shape="rect" href="Builders_8h.html" title=" " alt="" coords="1105,452,1239,479"/>
<area shape="rect" href="AllocationOpInterface_8h.html" title=" " alt="" coords="722,363,918,404"/>
<area shape="rect" href="CopyOpInterface_8h.html" title=" " alt="" coords="1323,281,1565,307"/>
<area shape="rect" href="InferTypeOpInterface_8h.html" title=" " alt="" coords="2297,273,2479,315"/>
<area shape="rect" title=" " alt="" coords="528,273,760,315"/>
<area shape="rect" title=" " alt="" coords="784,273,971,315"/>
<area shape="rect" href="mlir_2IR_2BuiltinTypes_8h.html" title=" " alt="" coords="2308,452,2468,479"/>
<area shape="rect" href="DialectConversion_8h.html" title=" " alt="" coords="4439,281,4697,307"/>
<area shape="rect" title=" " alt="" coords="4614,370,4781,397"/>
<area shape="rect" title=" " alt="" coords="4237,452,4401,479"/>
<area shape="rect" href="IR_2Dialect_8h.html" title=" " alt="" coords="3363,281,3490,307"/>
<area shape="rect" href="FunctionInterfaces_8h.html" title=" " alt="" coords="1097,281,1298,307"/>
<area shape="rect" href="SymbolTable_8h.html" title=" " alt="" coords="1521,370,1685,397"/>
<area shape="rect" href="OpImplementation_8h.html" title=" " alt="" coords="2916,370,3119,397"/>
<area shape="rect" href="CallInterfaces_8h.html" title=" " alt="" coords="2050,281,2273,307"/>
<area shape="rect" href="SideEffectInterfaces_8h.html" title=" " alt="" coords="2503,273,2689,315"/>
<area shape="rect" title=" " alt="" coords="1640,273,1789,315"/>
<area shape="rect" title=" " alt="" coords="1813,273,1976,315"/>
<area shape="rect" href="ReshapeOpsUtils_8h.html" title=" " alt="" coords="2936,273,3085,315"/>
<area shape="rect" href="CastInterfaces_8h.html" title=" " alt="" coords="3515,281,3741,307"/>
<area shape="rect" href="ShapedOpInterfaces_8h.html" title=" " alt="" coords="3765,273,3952,315"/>
<area shape="rect" href="ViewLikeInterface_8h.html" title=" " alt="" coords="3160,273,3339,315"/>
<area shape="rect" title=" " alt="" coords="3977,273,4181,315"/>
<area shape="rect" title=" " alt="" coords="4205,273,4363,315"/>
<area shape="rect" href="RegionGraphTraits_8h.html" title=" " alt="" coords="4823,191,5023,218"/>
<area shape="rect" title=" " alt="" coords="5047,191,5276,218"/>
</map>
</div>
</div>
<p><a href="OneShotAnalysis_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;one-shot-analysis&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5d3f4227b727bd0d4df109e86e0b1bab"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a5d3f4227b727bd0d4df109e86e0b1bab">isaTensor</a> (<a class="el" href="classmlir_1_1Type.html">Type</a> t)</td></tr>
<tr class="separator:a5d3f4227b727bd0d4df109e86e0b1bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d15fcc15553d58232b158df7b88c68"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a34d15fcc15553d58232b158df7b88c68">setInPlaceOpOperand</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;opOperand, bool inPlace)</td></tr>
<tr class="memdesc:a34d15fcc15553d58232b158df7b88c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark whether OpOperand will be bufferized inplace.  <a href="OneShotAnalysis_8cpp.html#a34d15fcc15553d58232b158df7b88c68">More...</a><br /></td></tr>
<tr class="separator:a34d15fcc15553d58232b158df7b88c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae34d7e3e2950bc89cee8e9fea0901e18"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#ae34d7e3e2950bc89cee8e9fea0901e18">isInplaceMemoryWrite</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;opOperand, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:ae34d7e3e2950bc89cee8e9fea0901e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if opOperand has been decided to bufferize in-place.  <a href="OneShotAnalysis_8cpp.html#ae34d7e3e2950bc89cee8e9fea0901e18">More...</a><br /></td></tr>
<tr class="separator:ae34d7e3e2950bc89cee8e9fea0901e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab55113efa4ab370f96475cb0704060c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#aab55113efa4ab370f96475cb0704060c">happensBefore</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *a, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *b, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo)</td></tr>
<tr class="memdesc:aab55113efa4ab370f96475cb0704060c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if <code>a</code> happens before <code>b</code>, i.e., <code>a</code> or one of its ancestors properly dominates <code>b</code> and <code>b</code> is not inside <code>a</code>.  <a href="OneShotAnalysis_8cpp.html#aab55113efa4ab370f96475cb0704060c">More...</a><br /></td></tr>
<tr class="separator:aab55113efa4ab370f96475cb0704060c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa98d06e880352df657fca1f49705ef4a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Region.html">Region</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#aa98d06e880352df657fca1f49705ef4a">getEnclosingRepetitiveRegion</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;<a class="el" href="Timing_8cpp.html#a52c68f021b2e559b78bed0c973d80848">options</a>)</td></tr>
<tr class="separator:aa98d06e880352df657fca1f49705ef4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a368d3837f9446a7970c7742e2a969c48"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Region.html">Region</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a368d3837f9446a7970c7742e2a969c48">getEnclosingRepetitiveRegion</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> <a class="el" href="InterfaceSupport_8h.html#a53ed1830bfcbea42b0e7b10281e03865">value</a>, const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;<a class="el" href="Timing_8cpp.html#a52c68f021b2e559b78bed0c973d80848">options</a>)</td></tr>
<tr class="separator:a368d3837f9446a7970c7742e2a969c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29bfc4f21756153c2cd5af3dbfc581a4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a29bfc4f21756153c2cd5af3dbfc581a4">isMemoryWrite</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> <a class="el" href="InterfaceSupport_8h.html#a53ed1830bfcbea42b0e7b10281e03865">value</a>, const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:a29bfc4f21756153c2cd5af3dbfc581a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return <code>true</code> if the given tensor value is a memory write.  <a href="OneShotAnalysis_8cpp.html#a29bfc4f21756153c2cd5af3dbfc581a4">More...</a><br /></td></tr>
<tr class="separator:a29bfc4f21756153c2cd5af3dbfc581a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09966b88875ed6e58f1d9d77a7b5b187"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a09966b88875ed6e58f1d9d77a7b5b187">canUseOpDominance</a> (const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;usesRead, const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;usesWrite, const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:a09966b88875ed6e58f1d9d77a7b5b187"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return <code>true</code> if op dominance can be used to rule out read-after-write conflicts wrt.  <a href="OneShotAnalysis_8cpp.html#a09966b88875ed6e58f1d9d77a7b5b187">More...</a><br /></td></tr>
<tr class="separator:a09966b88875ed6e58f1d9d77a7b5b187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9121bdc811d323e4deed805b692ec14e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a9121bdc811d323e4deed805b692ec14e">annotateConflict</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *uRead, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *uConflictingWrite, <a class="el" href="classmlir_1_1Value.html">Value</a> lastWrite)</td></tr>
<tr class="memdesc:a9121bdc811d323e4deed805b692ec14e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Annotate IR with details about the detected RaW conflict.  <a href="OneShotAnalysis_8cpp.html#a9121bdc811d323e4deed805b692ec14e">More...</a><br /></td></tr>
<tr class="separator:a9121bdc811d323e4deed805b692ec14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7be7a0bbac263f134ce07465d0b6e524"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a7be7a0bbac263f134ce07465d0b6e524">hasReadAfterWriteInterference</a> (const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;usesRead, const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;usesWrite, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo, <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo)</td></tr>
<tr class="memdesc:a7be7a0bbac263f134ce07465d0b6e524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given sets of uses and writes, return true if there is a RaW conflict under the assumption that all given reads/writes alias the same buffer and that all given writes bufferize inplace.  <a href="OneShotAnalysis_8cpp.html#a7be7a0bbac263f134ce07465d0b6e524">More...</a><br /></td></tr>
<tr class="separator:a7be7a0bbac263f134ce07465d0b6e524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78087fec9dcce33051c1ac245dc8c312"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a78087fec9dcce33051c1ac245dc8c312">getAliasingInplaceWrites</a> (<a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;res, <a class="el" href="classmlir_1_1Value.html">Value</a> root, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="separator:a78087fec9dcce33051c1ac245dc8c312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8de267d6eb9a5bb1712c6ece78aa78"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a4e8de267d6eb9a5bb1712c6ece78aa78">getAliasingReads</a> (<a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;res, <a class="el" href="classmlir_1_1Value.html">Value</a> root, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="separator:a4e8de267d6eb9a5bb1712c6ece78aa78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a509003d89102ecf08b1ae78f12ff872d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a509003d89102ecf08b1ae78f12ff872d">wouldCreateReadAfterWriteInterference</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;operand, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo, <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, bool checkConsistencyOnly=false)</td></tr>
<tr class="memdesc:a509003d89102ecf08b1ae78f12ff872d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if bufferizing <code>operand</code> inplace would create a conflict.  <a href="OneShotAnalysis_8cpp.html#a509003d89102ecf08b1ae78f12ff872d">More...</a><br /></td></tr>
<tr class="separator:a509003d89102ecf08b1ae78f12ff872d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67742de2589976800bf8b7c64dd41621"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a67742de2589976800bf8b7c64dd41621">annotateNonWritableTensor</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> <a class="el" href="InterfaceSupport_8h.html#a53ed1830bfcbea42b0e7b10281e03865">value</a>)</td></tr>
<tr class="memdesc:a67742de2589976800bf8b7c64dd41621"><td class="mdescLeft">&#160;</td><td class="mdescRight">Annotate IR with details about the detected non-writability conflict.  <a href="OneShotAnalysis_8cpp.html#a67742de2589976800bf8b7c64dd41621">More...</a><br /></td></tr>
<tr class="separator:a67742de2589976800bf8b7c64dd41621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8885544b78dec87e2117cba2d2ef8df"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#ac8885544b78dec87e2117cba2d2ef8df">hasPrecedingAliasingNonWritableTensor</a> (<a class="el" href="classmlir_1_1Value.html">Value</a> <a class="el" href="InterfaceSupport_8h.html#a53ed1830bfcbea42b0e7b10281e03865">value</a>, <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *currentOpOperand, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, const <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:ac8885544b78dec87e2117cba2d2ef8df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the reverse SSA use-def chain (following aliasing OpOperands) for non-writable tensor values.  <a href="OneShotAnalysis_8cpp.html#ac8885544b78dec87e2117cba2d2ef8df">More...</a><br /></td></tr>
<tr class="separator:ac8885544b78dec87e2117cba2d2ef8df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bc2b650d9ab5b285eec70dac1cb7f8"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a56bc2b650d9ab5b285eec70dac1cb7f8">wouldCreateWriteToNonWritableBuffer</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;operand, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;state, bool checkConsistencyOnly=false)</td></tr>
<tr class="memdesc:a56bc2b650d9ab5b285eec70dac1cb7f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if bufferizing <code>operand</code> inplace would create a write to a non-writable buffer.  <a href="OneShotAnalysis_8cpp.html#a56bc2b650d9ab5b285eec70dac1cb7f8">More...</a><br /></td></tr>
<tr class="separator:a56bc2b650d9ab5b285eec70dac1cb7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62ae5d3e6dcaccb57bb911948dee390"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#ad62ae5d3e6dcaccb57bb911948dee390">bufferizableInPlaceAnalysisImpl</a> (<a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;operand, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo)</td></tr>
<tr class="memdesc:ad62ae5d3e6dcaccb57bb911948dee390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if <code>operand</code> can be bufferized in-place.  <a href="OneShotAnalysis_8cpp.html#ad62ae5d3e6dcaccb57bb911948dee390">More...</a><br /></td></tr>
<tr class="separator:ad62ae5d3e6dcaccb57bb911948dee390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcddf4177606cbc95d6515e2f52762b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a0bcddf4177606cbc95d6515e2f52762b">inPlaceAnalysis</a> (<a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; &amp;ops, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo, unsigned analysisFuzzerSeed=0)</td></tr>
<tr class="memdesc:a0bcddf4177606cbc95d6515e2f52762b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze the <code>ops</code> to determine which OpOperands are inplaceable.  <a href="OneShotAnalysis_8cpp.html#a0bcddf4177606cbc95d6515e2f52762b">More...</a><br /></td></tr>
<tr class="separator:a0bcddf4177606cbc95d6515e2f52762b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66699b6e4b8d3b1f7583a0237ae62534"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a66699b6e4b8d3b1f7583a0237ae62534">hasTensorSemantics</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op)</td></tr>
<tr class="memdesc:a66699b6e4b8d3b1f7583a0237ae62534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the given op has a tensor result or a tensor operand.  <a href="OneShotAnalysis_8cpp.html#a66699b6e4b8d3b1f7583a0237ae62534">More...</a><br /></td></tr>
<tr class="separator:a66699b6e4b8d3b1f7583a0237ae62534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290c010370884580e57c1b53b17e4174"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a290c010370884580e57c1b53b17e4174">inPlaceAnalysis</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo, unsigned analysisFuzzerSeed=0)</td></tr>
<tr class="memdesc:a290c010370884580e57c1b53b17e4174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze all ops that are contained in <code>op</code>.  <a href="OneShotAnalysis_8cpp.html#a290c010370884580e57c1b53b17e4174">More...</a><br /></td></tr>
<tr class="separator:a290c010370884580e57c1b53b17e4174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cde494598eb762af78b1ff0549f607b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a3cde494598eb762af78b1ff0549f607b">equivalenceAnalysis</a> (<a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; &amp;ops, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:a3cde494598eb762af78b1ff0549f607b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze equivalence of tied OpResult/OpOperand pairs of the given ops.  <a href="OneShotAnalysis_8cpp.html#a3cde494598eb762af78b1ff0549f607b">More...</a><br /></td></tr>
<tr class="separator:a3cde494598eb762af78b1ff0549f607b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1cac7350e6ef7572621418c25189b5f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#ab1cac7350e6ef7572621418c25189b5f">equivalenceAnalysis</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state)</td></tr>
<tr class="memdesc:ab1cac7350e6ef7572621418c25189b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze equivalence of tied OpResult/OpOperand pairs of all ops contained in <code>op</code>.  <a href="OneShotAnalysis_8cpp.html#ab1cac7350e6ef7572621418c25189b5f">More...</a><br /></td></tr>
<tr class="separator:ab1cac7350e6ef7572621418c25189b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50cc17e27def58c1a3c5c17013fb231e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a50cc17e27def58c1a3c5c17013fb231e">checkAliasInfoConsistency</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo, <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;state, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo)</td></tr>
<tr class="memdesc:a50cc17e27def58c1a3c5c17013fb231e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert that the current bufferization decisions are consistent.  <a href="OneShotAnalysis_8cpp.html#a50cc17e27def58c1a3c5c17013fb231e">More...</a><br /></td></tr>
<tr class="separator:a50cc17e27def58c1a3c5c17013fb231e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d14cab2512c97b8e765048b3fbd2a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a53d14cab2512c97b8e765048b3fbd2a6">annotateOpsWithBufferizationMarkers</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo, const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;<a class="el" href="Timing_8cpp.html#a52c68f021b2e559b78bed0c973d80848">options</a>)</td></tr>
<tr class="memdesc:a53d14cab2512c97b8e765048b3fbd2a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Annotate the IR with the result of the analysis. For testing/debugging only.  <a href="OneShotAnalysis_8cpp.html#a53d14cab2512c97b8e765048b3fbd2a6">More...</a><br /></td></tr>
<tr class="separator:a53d14cab2512c97b8e765048b3fbd2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95383366e7de1251ca72479f00b89700"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a95383366e7de1251ca72479f00b89700">assertNoAllocsReturned</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;<a class="el" href="Timing_8cpp.html#a52c68f021b2e559b78bed0c973d80848">options</a>, <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;aliasInfo)</td></tr>
<tr class="memdesc:a95383366e7de1251ca72479f00b89700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert that every allocation can be deallocated in the same block.  <a href="OneShotAnalysis_8cpp.html#a95383366e7de1251ca72479f00b89700">More...</a><br /></td></tr>
<tr class="separator:a95383366e7de1251ca72479f00b89700"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4d6038da411832ee22a45c30a01aec02"><td class="memItemLeft" align="right" valign="top">constexpr StringLiteral&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="OneShotAnalysis_8cpp.html#a4d6038da411832ee22a45c30a01aec02">kInPlaceOperandsAttrName</a> = &quot;__inplace_operands_attr__&quot;</td></tr>
<tr class="memdesc:a4d6038da411832ee22a45c30a01aec02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attribute marker to specify op operands that bufferize in-place.  <a href="OneShotAnalysis_8cpp.html#a4d6038da411832ee22a45c30a01aec02">More...</a><br /></td></tr>
<tr class="separator:a4d6038da411832ee22a45c30a01aec02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;one-shot-analysis&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00063">63</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9121bdc811d323e4deed805b692ec14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9121bdc811d323e4deed805b692ec14e">&#9670;&nbsp;</a></span>annotateConflict()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void annotateConflict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>uRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>uConflictingWrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>lastWrite</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Annotate IR with details about the detected RaW conflict. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00513">513</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="Value_8h_source.html#l00113">mlir::Value::cast()</a>, <a class="el" href="Value_8h_source.html#l00103">mlir::Value::dyn_cast()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00190">mlir::Operation::getContext()</a>, <a class="el" href="Value_8cpp_source.html#l00212">mlir::OpOperand::getOperandNumber()</a>, <a class="el" href="UseDefLists_8h_source.html#l00040">mlir::detail::IROperandBase::getOwner()</a>, <a class="el" href="Value_8h_source.html#l00313">mlir::BlockArgument::getOwner()</a>, <a class="el" href="Block_8cpp_source.html#l00030">mlir::Block::getParentOp()</a>, <a class="el" href="Builders_8cpp_source.html#l00099">mlir::Builder::getUnitAttr()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00438">mlir::Operation::setAttr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00552">hasReadAfterWriteInterference()</a>.</p>

</div>
</div>
<a id="a67742de2589976800bf8b7c64dd41621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67742de2589976800bf8b7c64dd41621">&#9670;&nbsp;</a></span>annotateNonWritableTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void annotateNonWritableTensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Annotate IR with details about the detected non-writability conflict. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00807">807</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="Value_8h_source.html#l00313">mlir::BlockArgument::getOwner()</a>, <a class="el" href="Block_8cpp_source.html#l00030">mlir::Block::getParentOp()</a>, <a class="el" href="Builders_8cpp_source.html#l00099">mlir::Builder::getUnitAttr()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00438">mlir::Operation::setAttr()</a>, and <a class="el" href="InterfaceSupport_8h_source.html#l00164">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00829">hasPrecedingAliasingNonWritableTensor()</a>.</p>

</div>
</div>
<a id="a53d14cab2512c97b8e765048b3fbd2a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d14cab2512c97b8e765048b3fbd2a6">&#9670;&nbsp;</a></span>annotateOpsWithBufferizationMarkers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void annotateOpsWithBufferizationMarkers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Annotate the IR with the result of the analysis. For testing/debugging only. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l01072">1072</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00139">mlir::bufferization::BufferizationAliasInfo::isInPlace()</a>, <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00082">setInPlaceOpOperand()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00621">mlir::Operation::walk()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>.</p>

</div>
</div>
<a id="a95383366e7de1251ca72479f00b89700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95383366e7de1251ca72479f00b89700">&#9670;&nbsp;</a></span>assertNoAllocsReturned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> assertNoAllocsReturned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assert that every allocation can be deallocated in the same block. </p>
<p>I.e., every value that is returned or yielded from a block is:</p><ul>
<li>guaranteed to be aliasing a bbArg of that block or a parent block, or</li>
<li>guaranteed to be aliasing an OpResult of a op in a parent block.</li>
</ul>
<p>In that case, buffer deallocation is simple: Every allocated buffer can be deallocated in the same block. Otherwise, the buffer deallocation pass must be run.</p>
<p>Note: The current implementation checks for equivalent values instead of aliasing values, which is stricter than needed. We can currently not check for aliasing values because the analysis is a maybe-alias analysis and we need a must-alias analysis here.</p>
<p>Example: </p><div class="fragment"><div class="line">%0 = <span class="stringliteral">&quot;some_op&quot;</span> : tensor&lt;?xf32&gt;</div>
<div class="line">%1 = scf.if %c -&gt; (tensor&lt;?xf32&gt;) {</div>
<div class="line">  scf.yield %0 : tensor&lt;?xf32&gt;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">  %t = linalg.alloc_tensor : tensor&lt;?xf32&gt;</div>
<div class="line">  scf.yield %t : tensor&lt;?xf32&gt;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the above example, the second scf.yield op is problematic because the yielded value t is defined in the same block as the scf.yield op and and bufferizes to a new allocation. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l01114">1114</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8cpp_source.html#l00225">mlir::Operation::emitError()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00343">mlir::Operation::getOpOperands()</a>, <a class="el" href="ControlFlowInterfaces_8cpp_source.html#l00360">mlir::isRegionReturnLike()</a>, <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>, <a class="el" href="LogicalResult_8h_source.html#l00056">mlir::success()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00621">mlir::Operation::walk()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>.</p>

</div>
</div>
<a id="ad62ae5d3e6dcaccb57bb911948dee390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62ae5d3e6dcaccb57bb911948dee390">&#9670;&nbsp;</a></span>bufferizableInPlaceAnalysisImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> bufferizableInPlaceAnalysisImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;&#160;</td>
          <td class="paramname"><em>operand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if <code>operand</code> can be bufferized in-place. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00890">890</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00144">mlir::bufferization::BufferizationAliasInfo::bufferizeInPlace()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00155">mlir::bufferization::BufferizationAliasInfo::bufferizeOutOfPlace()</a>, <a class="el" href="Value_8cpp_source.html#l00212">mlir::OpOperand::getOperandNumber()</a>, <a class="el" href="UseDefLists_8h_source.html#l00040">mlir::detail::IROperandBase::getOwner()</a>, <a class="el" href="LogicalResult_8h_source.html#l00056">mlir::success()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00787">wouldCreateReadAfterWriteInterference()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00859">wouldCreateWriteToNonWritableBuffer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00930">inPlaceAnalysis()</a>.</p>

</div>
</div>
<a id="a09966b88875ed6e58f1d9d77a7b5b187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09966b88875ed6e58f1d9d77a7b5b187">&#9670;&nbsp;</a></span>canUseOpDominance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool canUseOpDominance </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>usesRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>usesWrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return <code>true</code> if op dominance can be used to rule out read-after-write conflicts wrt. </p>
<p>the given reads and writes.</p>
<p>Op dominance can often be used to rule out potential conflicts such as "read" happens before "write". E.g., the following IR is not a RaW conflict because the the read happens <em>before</em> the write.</p>
<p>%0 = ... : tensor&lt;?xf32&gt; "reading_op"(%0) : tensor&lt;?xf32&gt; %1 = "writing_op"(%0) : tensor&lt;?xf32&gt; -&gt; tensor&lt;?xf32&gt;</p>
<p>This is no longer true inside loops (or repetitive regions). In such cases, there may not be a meaningful <code>happensBefore</code> relationship because ops could be executed multiple times. E.g.:</p>
<p>%0 = ... : tensor&lt;?xf32&gt; scf.for ... { "reading_op"(%0) : tensor&lt;?xf32&gt; %1 = "writing_op"(%0) : tensor&lt;?xf32&gt; -&gt; tensor&lt;?xf32&gt; ... }</p>
<p>In the above example, reading_op happens before writing_op according to op dominance. However, both ops may happen multiple times; in particular, the second execution of reading_op happens after the first execution of writing_op. This is problematic because the tensor %0 they operate on (i.e., the "definition") is defined outside of the loop.</p>
<p>Counter example:</p>
<p>scf.for ... { %0 = ... : tensor&lt;?xf32&gt; "reading_op"(%0) : tensor&lt;?xf32&gt; %1 = "writing_op"(%0) : tensor&lt;?xf32&gt; -&gt; tensor&lt;?xf32&gt; ... }</p>
<p>In this example, the definition %0 is in the same repetitive region as "writing_op", so op dominance can be used to compute the <code>happensBefore</code> relationship.</p>
<p>Whether op dominance can be used or not is decided as follows: Find the closest enclosing repetitive region of all buffer writes wrt. the given tensor reads and writes. (The given sets of reads and writes contain the entire alias set.) In case of a read, we look at the op that defines the read value. In case of a write, we look at the op that is writing. If all of those ops are in the same closest enclosing repetitive region (nullptr in case of "no repetitive region" found at all), then op dominance can be used. Otherwise, it cannot be used.</p>
<p>Example: The common enclosing repetitive region is the scf.for loop. Op dominance can be used. scf.for ... { %0 = tensor.generate "read"(%0) }</p>
<p>Example: The common enclosing repetitive region is nullptr: There is no repetitive region around the tensor.generate. Op dominance can be used. %0 = tensor.generate scf.for ... { "read"(%0) }</p>
<p>Example: The common enclosing repetitive regions of tensor.generate and "write" differ. Op dominance cannot be used. %0 = tensor.generate scf.for ... { "read"(%0) "write"(%0) }</p>
<p>Example: The common enclosing repetitive regions of tensor.generate and "write" differ, but there is no read of %0, so op dominance can be used. %0 = tensor.generate scf.for ... { "write"(%0) }</p>
<p>Note: iter_args of loops are not aliases of their respective block arguments, so op domanice can be used when analyzing ops that operate on them. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00478">478</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="ControlFlowInterfaces_8cpp_source.html#l00332">mlir::getEnclosingRepetitiveRegion()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00386">isMemoryWrite()</a>, and <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00552">hasReadAfterWriteInterference()</a>.</p>

</div>
</div>
<a id="a50cc17e27def58c1a3c5c17013fb231e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50cc17e27def58c1a3c5c17013fb231e">&#9670;&nbsp;</a></span>checkAliasInfoConsistency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> checkAliasInfoConsistency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assert that the current bufferization decisions are consistent. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l01033">1033</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8h_source.html#l00343">mlir::Operation::getOpOperands()</a>, <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00621">mlir::Operation::walk()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>.</p>

</div>
</div>
<a id="ab1cac7350e6ef7572621418c25189b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1cac7350e6ef7572621418c25189b5f">&#9670;&nbsp;</a></span>equivalenceAnalysis() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void equivalenceAnalysis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyze equivalence of tied OpResult/OpOperand pairs of all ops contained in <code>op</code>. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l01016">1016</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00999">equivalenceAnalysis()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00388">mlir::Operation::getResultTypes()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00068">isaTensor()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00621">mlir::Operation::walk()</a>.</p>

</div>
</div>
<a id="a3cde494598eb762af78b1ff0549f607b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cde494598eb762af78b1ff0549f607b">&#9670;&nbsp;</a></span>equivalenceAnalysis() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void equivalenceAnalysis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyze equivalence of tied OpResult/OpOperand pairs of the given ops. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00999">999</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8h_source.html#l00080">mlir::bufferization::BufferizationAliasInfo::unionEquivalenceClasses()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l01016">equivalenceAnalysis()</a>.</p>

</div>
</div>
<a id="a78087fec9dcce33051c1ac245dc8c312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78087fec9dcce33051c1ac245dc8c312">&#9670;&nbsp;</a></span>getAliasingInplaceWrites()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getAliasingInplaceWrites </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00710">710</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00172">mlir::bufferization::BufferizationAliasInfo::applyOnAliases()</a>, <a class="el" href="Value_8h_source.html#l00201">mlir::Value::getUses()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00333">isInplaceMemoryWrite()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00787">wouldCreateReadAfterWriteInterference()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00859">wouldCreateWriteToNonWritableBuffer()</a>.</p>

</div>
</div>
<a id="a4e8de267d6eb9a5bb1712c6ece78aa78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8de267d6eb9a5bb1712c6ece78aa78">&#9670;&nbsp;</a></span>getAliasingReads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getAliasingReads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00722">722</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00172">mlir::bufferization::BufferizationAliasInfo::applyOnAliases()</a>, and <a class="el" href="Value_8h_source.html#l00201">mlir::Value::getUses()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00787">wouldCreateReadAfterWriteInterference()</a>.</p>

</div>
</div>
<a id="aa98d06e880352df657fca1f49705ef4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98d06e880352df657fca1f49705ef4a">&#9670;&nbsp;</a></span>getEnclosingRepetitiveRegion() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Region.html">Region</a>* getEnclosingRepetitiveRegion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00359">359</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8h_source.html#l00208">mlir::Operation::getParentOp()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00204">mlir::Operation::getParentRegion()</a>, and <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>.</p>

</div>
</div>
<a id="a368d3837f9446a7970c7742e2a969c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a368d3837f9446a7970c7742e2a969c48">&#9670;&nbsp;</a></span>getEnclosingRepetitiveRegion() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Region.html">Region</a>* getEnclosingRepetitiveRegion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmlir_1_1bufferization_1_1BufferizationOptions.html">BufferizationOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00371">371</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Region_8h_source.html#l00200">mlir::Region::getParentOp()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00204">mlir::Operation::getParentRegion()</a>, <a class="el" href="IR_2Region_8cpp_source.html#l00062">mlir::Region::getRegionNumber()</a>, <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>, and <a class="el" href="InterfaceSupport_8h_source.html#l00164">value</a>.</p>

</div>
</div>
<a id="aab55113efa4ab370f96475cb0704060c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab55113efa4ab370f96475cb0704060c">&#9670;&nbsp;</a></span>happensBefore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool happensBefore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if <code>a</code> happens before <code>b</code>, i.e., <code>a</code> or one of its ancestors properly dominates <code>b</code> and <code>b</code> is not inside <code>a</code>. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00345">345</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8h_source.html#l00208">mlir::Operation::getParentOp()</a>, <a class="el" href="IR_2Operation_8cpp_source.html#l00176">mlir::Operation::isProperAncestor()</a>, and <a class="el" href="Dominance_8h_source.html#l00134">mlir::DominanceInfo::properlyDominates()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00552">hasReadAfterWriteInterference()</a>.</p>

</div>
</div>
<a id="ac8885544b78dec87e2117cba2d2ef8df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8885544b78dec87e2117cba2d2ef8df">&#9670;&nbsp;</a></span>hasPrecedingAliasingNonWritableTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasPrecedingAliasingNonWritableTensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> *&#160;</td>
          <td class="paramname"><em>currentOpOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the reverse SSA use-def chain (following aliasing OpOperands) for non-writable tensor values. </p>
<p>Stop searching when an out-of-place bufferized OpOperand was found (or when the OpOperand was not bufferized yet). <code>currentOpOperand</code> is assumed to be in-place, even if that decision was not materialized in <code>aliasInfo</code> yet. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00829">829</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00807">annotateNonWritableTensor()</a>, <a class="el" href="Value_8h_source.html#l00103">mlir::Value::dyn_cast()</a>, <a class="el" href="BufferizableOpInterface_8cpp_source.html#l00322">mlir::bufferization::AnalysisState::getAliasingOpOperand()</a>, <a class="el" href="OneShotAnalysis_8h_source.html#l00154">mlir::bufferization::OneShotAnalysisState::getOptions()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00139">mlir::bufferization::BufferizationAliasInfo::isInPlace()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00311">mlir::bufferization::OneShotAnalysisState::isWritable()</a>, <a class="el" href="BufferizableOpInterface_8h_source.html#l00292">mlir::bufferization::BufferizationOptions::printConflicts</a>, and <a class="el" href="InterfaceSupport_8h_source.html#l00164">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00859">wouldCreateWriteToNonWritableBuffer()</a>.</p>

</div>
</div>
<a id="a7be7a0bbac263f134ce07465d0b6e524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7be7a0bbac263f134ce07465d0b6e524">&#9670;&nbsp;</a></span>hasReadAfterWriteInterference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasReadAfterWriteInterference </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>usesRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacemlir.html#a59d6aae8a616cd9d13c8b1edb1095948">DenseSet</a>&lt; <a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>usesWrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given sets of uses and writes, return true if there is a RaW conflict under the assumption that all given reads/writes alias the same buffer and that all given writes bufferize inplace. </p>
<p>A conflict is: According to SSA use-def chains, a read R is supposed to read the result of a write W1. But because of bufferization decisions, R actually reads another write W2. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00552">552</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00513">annotateConflict()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00478">canUseOpDominance()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00345">happensBefore()</a>, <a class="el" href="ControlFlowInterfaces_8cpp_source.html#l00267">mlir::insideMutuallyExclusiveRegions()</a>, and <a class="el" href="PassManagerOptions_8cpp_source.html#l00084">options</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00787">wouldCreateReadAfterWriteInterference()</a>.</p>

</div>
</div>
<a id="a66699b6e4b8d3b1f7583a0237ae62534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66699b6e4b8d3b1f7583a0237ae62534">&#9670;&nbsp;</a></span>hasTensorSemantics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasTensorSemantics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if the given op has a tensor result or a tensor operand. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00974">974</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Operation_8h_source.html#l00357">mlir::Operation::getOperandTypes()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00388">mlir::Operation::getResultTypes()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00068">isaTensor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00981">inPlaceAnalysis()</a>.</p>

</div>
</div>
<a id="a290c010370884580e57c1b53b17e4174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290c010370884580e57c1b53b17e4174">&#9670;&nbsp;</a></span>inPlaceAnalysis() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> inPlaceAnalysis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>analysisFuzzerSeed</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyze all ops that are contained in <code>op</code>. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00981">981</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00974">hasTensorSemantics()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00930">inPlaceAnalysis()</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00621">mlir::Operation::walk()</a>.</p>

</div>
</div>
<a id="a0bcddf4177606cbc95d6515e2f52762b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bcddf4177606cbc95d6515e2f52762b">&#9670;&nbsp;</a></span>inPlaceAnalysis() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> inPlaceAnalysis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>analysisFuzzerSeed</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Analyze the <code>ops</code> to determine which OpOperands are inplaceable. </p>
<p>Walk ops in reverse and bufferize ops greedily. This is a good starter heuristic.</p>
<p>Even if an op does not read or write, it may still create an alias when bufferized in-place. An example of such ops is tensor.extract_slice.</p>
<p>Rationale for bufferizing <code>%1 = tensor.extract_slice %0[...]</code> inplace:</p>
<p>When bufferized out of place, an ExtractSliceOp lowers to alloc + copy. This cannot change the flow of information for either the source or the result buffers.</p>
<p>When bufferized inplace, an ExtractSliceOp does not by itself create any read or write from memory. Instead, it has the effect of merging the alias sets of the source and the result buffers.</p>
<p>An analysis is required to ensure inplace bufferization would not result in RaW dependence violations. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00930">930</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8h_source.html#l00035">mlir::bufferization::OneShotBufferizationOptions::analysisHeuristic</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00890">bufferizableInPlaceAnalysisImpl()</a>, <a class="el" href="BufferizableOpInterface_8cpp_source.html#l00290">mlir::bufferization::BufferizationOptions::dynCastBufferizableOp()</a>, <a class="el" href="LogicalResult_8h_source.html#l00072">mlir::failed()</a>, <a class="el" href="LogicalResult_8h_source.html#l00062">mlir::failure()</a>, <a class="el" href="OneShotAnalysis_8h_source.html#l00154">mlir::bufferization::OneShotAnalysisState::getOptions()</a>, and <a class="el" href="LogicalResult_8h_source.html#l00056">mlir::success()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01160">mlir::bufferization::analyzeOp()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00981">inPlaceAnalysis()</a>.</p>

</div>
</div>
<a id="a5d3f4227b727bd0d4df109e86e0b1bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3f4227b727bd0d4df109e86e0b1bab">&#9670;&nbsp;</a></span>isaTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isaTensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Type.html">Type</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00068">68</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Types_8h_source.html#l00260">mlir::Type::isa()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01016">equivalenceAnalysis()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00974">hasTensorSemantics()</a>.</p>

</div>
</div>
<a id="ae34d7e3e2950bc89cee8e9fea0901e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae34d7e3e2950bc89cee8e9fea0901e18">&#9670;&nbsp;</a></span>isInplaceMemoryWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isInplaceMemoryWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;&#160;</td>
          <td class="paramname"><em>opOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if opOperand has been decided to bufferize in-place. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00333">333</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="OneShotAnalysis_8cpp_source.html#l00139">mlir::bufferization::BufferizationAliasInfo::isInPlace()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00710">getAliasingInplaceWrites()</a>.</p>

</div>
</div>
<a id="a29bfc4f21756153c2cd5af3dbfc581a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29bfc4f21756153c2cd5af3dbfc581a4">&#9670;&nbsp;</a></span>isMemoryWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool isMemoryWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Value.html">Value</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return <code>true</code> if the given tensor value is a memory write. </p>
<p>Most values are tensor writes, but ops that define a tensor SSA value without specifying its contents (e.g., alloc_tensor) are not. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00386">386</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="InterfaceSupport_8h_source.html#l00164">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00478">canUseOpDominance()</a>.</p>

</div>
</div>
<a id="a34d15fcc15553d58232b158df7b88c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d15fcc15553d58232b158df7b88c68">&#9670;&nbsp;</a></span>setInPlaceOpOperand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setInPlaceOpOperand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;&#160;</td>
          <td class="paramname"><em>opOperand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>inPlace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mark whether OpOperand will be bufferized inplace. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00082">82</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="UseDefLists_8h_source.html#l00137">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00414">mlir::Operation::getAttr()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00306">mlir::Operation::getNumOperands()</a>, <a class="el" href="Value_8cpp_source.html#l00212">mlir::OpOperand::getOperandNumber()</a>, <a class="el" href="IR_2Operation_8h_source.html#l00343">mlir::Operation::getOpOperands()</a>, <a class="el" href="UseDefLists_8h_source.html#l00040">mlir::detail::IROperandBase::getOwner()</a>, <a class="el" href="Value_8h_source.html#l00122">mlir::Value::getType()</a>, <a class="el" href="IR_2Types_8h_source.html#l00260">mlir::Type::isa()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00079">kInPlaceOperandsAttrName</a>, and <a class="el" href="IR_2Operation_8h_source.html#l00438">mlir::Operation::setAttr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l01072">annotateOpsWithBufferizationMarkers()</a>.</p>

</div>
</div>
<a id="a509003d89102ecf08b1ae78f12ff872d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a509003d89102ecf08b1ae78f12ff872d">&#9670;&nbsp;</a></span>wouldCreateReadAfterWriteInterference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool wouldCreateReadAfterWriteInterference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;&#160;</td>
          <td class="paramname"><em>operand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AnalysisState.html">AnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkConsistencyOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if bufferizing <code>operand</code> inplace would create a conflict. </p>
<p>A read R and a write W of the same alias set is a conflict if inplace bufferization of W changes the value read by R to a value different from the one that would be expected by tracing back R's origin through SSA use-def chains. A conflict can only be introduced by a new alias and/or an inplace bufferization decision.</p>
<p>Example: %0 = tensor.extract_slice t[...][...][1, 1] {inplace?} %1 = vector.transfer_write v1, t {inplace} : vector&lt;5xf32&gt;, tensor&lt;?xf32&gt; e = tensor.extract_slice %1 %2 = vector.transfer_write v2, %0 {inplace} : vector&lt;6xf32&gt;, tensor&lt;?xf32&gt; %3 = vector.transfer_read e, cst : tensor&lt;?xf32&gt;, vector&lt;7xf32&gt;</p>
<p>In the above example, the two TransferWriteOps have already been decided to bufferize inplace. Bufferizing the ExtractSliceOp inplace would create a conflict because:</p><ul>
<li>According to SSA use-def chains, we expect to read the result of %1.</li>
<li>However, adding an alias {%0, t} would mean that the second TransferWriteOp overwrites the first one. Therefore, the TransferReadOp would no longer be reading the result of %1.</li>
</ul>
<p>If <code>checkConsistencyOnly</code> is true, this function checks if there is a read-after-write conflict without bufferizing <code>operand</code> inplace. This would indicate a problem with the current inplace bufferization decisions.</p>
<p>Note: If <code>checkConsistencyOnly</code>, this function may be called with a null OpResult. In that case, only the consistency of bufferization decisions involving aliases of the given OpOperand are checked. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00787">787</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="UseDefLists_8h_source.html#l00137">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00710">getAliasingInplaceWrites()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00722">getAliasingReads()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00552">hasReadAfterWriteInterference()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00890">bufferizableInPlaceAnalysisImpl()</a>.</p>

</div>
</div>
<a id="a56bc2b650d9ab5b285eec70dac1cb7f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56bc2b650d9ab5b285eec70dac1cb7f8">&#9670;&nbsp;</a></span>wouldCreateWriteToNonWritableBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool wouldCreateWriteToNonWritableBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1OpOperand.html">OpOperand</a> &amp;&#160;</td>
          <td class="paramname"><em>operand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmlir_1_1bufferization_1_1BufferizationAliasInfo.html">BufferizationAliasInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>aliasInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1bufferization_1_1OneShotAnalysisState.html">OneShotAnalysisState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkConsistencyOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if bufferizing <code>operand</code> inplace would create a write to a non-writable buffer. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00859">859</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">References <a class="el" href="BufferizableOpInterface_8cpp_source.html#l00353">mlir::bufferization::AnalysisState::bufferizesToMemoryWrite()</a>, <a class="el" href="UseDefLists_8h_source.html#l00137">mlir::IROperand&lt; DerivedT, IRValueT &gt;::get()</a>, <a class="el" href="OneShotAnalysis_8cpp_source.html#l00710">getAliasingInplaceWrites()</a>, <a class="el" href="BufferizableOpInterface_8cpp_source.html#l00332">mlir::bufferization::AnalysisState::getAliasingOpResult()</a>, and <a class="el" href="OneShotAnalysis_8cpp_source.html#l00829">hasPrecedingAliasingNonWritableTensor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00890">bufferizableInPlaceAnalysisImpl()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4d6038da411832ee22a45c30a01aec02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d6038da411832ee22a45c30a01aec02">&#9670;&nbsp;</a></span>kInPlaceOperandsAttrName</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr StringLiteral kInPlaceOperandsAttrName = &quot;__inplace_operands_attr__&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attribute marker to specify op operands that bufferize in-place. </p>

<p class="definition">Definition at line <a class="el" href="OneShotAnalysis_8cpp_source.html#l00079">79</a> of file <a class="el" href="OneShotAnalysis_8cpp_source.html">OneShotAnalysis.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="OneShotAnalysis_8cpp_source.html#l00082">setInPlaceOpOperand()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 30 2022 00:38:36 for MLIR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
